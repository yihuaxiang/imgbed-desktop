# 便携版使用指南

## 什么是便携版？

便携版是一个**单个 exe 文件**，具有以下特点：

- ✅ **无需安装**：双击即可运行
- ✅ **独立运行**：不依赖系统注册表
- ✅ **方便携带**：可以放在 U 盘、网盘等任意位置
- ✅ **干净卸载**：删除文件即可，不留痕迹

## 构建便携版

### 方法 1：只构建便携版（推荐）

```bash
npm run build:win:portable
```

构建完成后，在 `dist/` 目录会生成：
- `Imgbed 1.0.0.exe` - 这就是便携版文件

### 方法 2：同时构建安装程序和便携版

```bash
npm run build:win:x64
```

这会同时生成：
- `Imgbed Setup 1.0.0.exe` - 安装程序
- `Imgbed 1.0.0.exe` - 便携版

## 使用便携版

### 对于开发者（你）

1. **构建便携版**：
   ```bash
   npm run build:win:portable
   ```

2. **找到生成的文件**：
   - 位置：`dist/Imgbed 1.0.0.exe`
   - 文件大小：通常 100-200 MB（包含所有依赖）

3. **测试运行**：
   - 在 Windows 系统上双击 `Imgbed 1.0.0.exe`
   - 应该能直接运行，无需安装

4. **分发**：
   - 直接分发这个 exe 文件给用户
   - 可以上传到网盘、GitHub Releases 等

### 对于最终用户

1. **下载** `Imgbed 1.0.0.exe` 文件
2. **双击运行**，无需安装
3. **使用完毕**，直接关闭即可
4. **卸载**：删除 exe 文件即可

## 常见问题

### Q: 便携版和安装程序有什么区别？

**便携版**：
- 单个 exe 文件
- 无需安装
- 可以放在任意位置
- 不会创建开始菜单快捷方式
- 不会在系统注册表中注册

**安装程序**：
- 需要安装到系统
- 会创建开始菜单快捷方式
- 可以在"程序和功能"中卸载
- 安装到系统目录（如 `C:\Program Files\`）

### Q: 便携版首次运行很慢？

便携版首次运行时会解压文件到临时目录，所以可能稍慢。后续运行会快很多。

### Q: 便携版会生成临时文件吗？

是的，便携版会在系统临时目录创建文件，但关闭应用后会自动清理。

### Q: 如果遇到图标错误怎么办？

如果构建时提示图标尺寸不足（需要至少 256x256）：

1. **临时方案**：暂时移除图标配置（不推荐）
2. **正确方案**：准备至少 256x256 的图标文件
   - 使用在线工具：https://cloudconvert.com/png-to-ico
   - 上传 PNG 图标，转换为 ICO
   - 替换 `build/icon.ico`

### Q: 便携版文件很大？

是的，便携版包含所有依赖（Electron、ffmpeg 等），所以文件较大（通常 100-200 MB）。这是正常的。

### Q: 可以压缩便携版吗？

可以，但压缩后用户需要先解压才能运行。建议直接分发 exe 文件。

## 技术细节

便携版使用 NSIS Portable 格式打包，实际上是一个自解压的压缩包。运行时：
1. 解压文件到临时目录
2. 运行应用
3. 关闭后清理临时文件

## 推荐使用场景

- ✅ **个人使用**：推荐便携版，方便快捷
- ✅ **U 盘携带**：便携版最适合
- ✅ **测试版本**：便携版便于快速测试
- ✅ **企业环境**：如果 IT 政策限制安装，便携版是很好的选择

## 不推荐使用场景

- ❌ **需要系统集成**：如果需要开始菜单、文件关联等，使用安装程序
- ❌ **批量部署**：企业批量部署建议使用安装程序
- ❌ **需要自动更新**：安装程序更适合配置自动更新
